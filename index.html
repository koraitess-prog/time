<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8" />
  <title>Rust Tree Zoom</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    /* גוף הדף – רקע שחור, מרכז את העץ */
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background: #000;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: system-ui, sans-serif;
      color: #fff;
    }

    .wrapper {
      position: relative;
      max-width: 90vw;
      max-height: 90vh;
      transform-origin: center center;
      transition: transform 0.15s linear;
    }

    .tree {
      display: block;
      max-width: 90vw;
      max-height: 90vh;
      height: auto;
    }

    .rust {
      position: absolute;
      inset: 0;
      max-width: 90vw;
      max-height: 90vh;
      height: auto;
      opacity: 0;
      transition: opacity 0.2s linear;
      pointer-events: none;
    }

    .debug {
      position: fixed;
      bottom: 10px;
      left: 10px;
      font-size: 11px;
      opacity: 0.5;
      pointer-events: none;
    }
  </style>
</head>

<body>

  <div class="wrapper" id="wrapper">
    <!-- עץ נקי -->
    <img src="tree_clean.png" class="tree" id="treeClean" alt="עץ נקי" />

    <!-- עץ חלוד מעליו -->
    <img src="tree_rust.png" class="tree rust" id="treeRust" alt="עץ חלוד" />
  </div>

  <div class="debug" id="debug">
    גלגלת במחשב: למעלה = יותר חלודה, למטה = פחות. בטלפון – גרירה למעלה/למטה.
  </div>

  <script>
    const cleanImg = document.getElementById("treeClean");
    const rustImg  = document.getElementById("treeRust");
    const wrapper  = document.getElementById("wrapper");
    const debug    = document.getElementById("debug");

    let rustAmount = 0;   // 0 = נקי, 1 = חלוד לגמרי
    let scaleBase  = 1;   // בסיס זום
    let maxZoom    = 1.6; // כמה חזק זום אין (להגדיל/להקטין אם בא לך יותר/פחות)

    /* ---------- עוזר לעדכן מצב ---------- */
    function updateView() {
      // מגבילים בין 0 ל־1
      rustAmount = Math.max(0, Math.min(1, rustAmount));

      // כמה חלודה רואים
      rustImg.style.opacity = rustAmount;

      // זום – ככל שיש יותר חלודה, כך יותר זום
      const scale = scaleBase + (maxZoom - scaleBase) * rustAmount;
      wrapper.style.transform = `scale(${scale})`;
    }

    /* ---------- גלגלת במחשב ---------- */
    window.addEventListener("wheel", (event) => {
      // deltaY < 0 → גלילה למעלה (לכיוון המסך) → יותר חלודה
      if (event.deltaY < 0) {
        rustAmount += 0.06;
      } else {
        rustAmount -= 0.06;
      }
      updateView();
    });

    /* ---------- טאץ' בטלפון / טאבלט ---------- */
    let lastTouchY = null;

    window.addEventListener("touchstart", (event) => {
      if (event.touches.length === 1) {
        lastTouchY = event.touches[0].clientY;
      }
    }, { passive: true });

    window.addEventListener("touchmove", (event) => {
      if (event.touches.length === 1 && lastTouchY !== null) {
        const currentY = event.touches[0].clientY;
        const deltaY = lastTouchY - currentY; // גרירה למעלה = מספר חיובי

        rustAmount += deltaY * 0.002; // רגישות – אפשר לשחק
        updateView();

        lastTouchY = currentY;
      }
    }, { passive: true });

    window.addEventListener("touchend", () => {
      lastTouchY = null;
    });

    /* ---------- בדיקת טעינה של התמונות ---------- */
    function checkLoaded(img, name) {
      img.addEventListener("error", () => {
        debug.textContent = `לא מצאתי את הקובץ: ${name}. בדקי שהשם והסיומת נכונים.`;
      });
    }

    checkLoaded(cleanImg, "tree_clean.png");
    checkLoaded(rustImg,  "tree_rust.png");

    // התחלה – לוודא שהעץ נראה נקי לזום 1
    updateView();
  </script>

</body>
</html>
